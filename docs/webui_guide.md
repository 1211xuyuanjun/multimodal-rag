# 🌐 多模态RAG系统Web界面使用指南

## 🚀 快速开始

### 启动Web界面

```bash
python webui.py
```

启动后，在浏览器中访问：`http://localhost:7860`

## 📋 界面功能介绍

### 1. 📚 智能问答主界面

这是系统的核心界面，集成了文档管理和智能问答功能。

#### 📄 文档管理区域

**功能**：上传和管理PDF文档

**操作步骤**：
1. 在"上传PDF文档"区域选择或拖拽PDF文件（支持多文件上传）
2. 点击"📤 上传并处理"开始处理
3. 在右侧"系统状态"区域查看处理结果

**处理过程**：
- 📖 PDF解析：提取文本和图像内容
- 🔪 智能分块：将内容分割为合适的块
- 🗂️ 向量存储：生成embedding并存储到向量数据库

**状态信息**：
- ✅ 成功处理的文件数量
- ❌ 处理失败的文件及错误信息
- 📦 生成的文档块数量
- 📊 当前存储状态

#### 💬 智能问答区域

**功能**：基于文档内容的智能问答

**操作步骤**：
1. 在"输入您的问题"框中输入问题
2. 选择处理模式和搜索类型
3. 点击"🚀 提问"获取答案

**配置选项**：
- 🧠 **智能处理**：启用查询分解和结果汇总（推荐）
- 🔍 **搜索类型**：
  - `文本+图像`：搜索文本和图像内容（推荐）
  - `仅文本`：仅搜索文本内容
  - `仅图像`：仅搜索图像内容

**输出信息**：
- 📝 **答案**：基于文档内容生成的完整答案
- 🔧 **处理信息**：
  - 查询类型（简单/复杂）
  - 是否使用分解和汇总
  - 子查询数量和执行情况
  - 检索到的结果数量

**智能查询分析**（内置功能）：
系统会自动分析每个查询的复杂度和意图，包括：
- 🎯 意图类型识别
- 📊 复杂度评分（0-10分）
- 🔧 自动判断是否需要分解
- 🔑 关键概念提取
- 📋 生成执行计划

### 2. ⚙️ 系统设置界面

**功能**：配置系统参数和查看详细信息

#### 🔧 配置管理

**可调整参数**：
- **查询分解阈值**：复杂度超过此值的查询将被分解（1.0-10.0）
- **最大子查询数量**：分解后的最大子查询数量（2-10）
- **启用结果汇总**：是否使用LLM汇总多个子查询结果

**操作**：
1. 调整滑块设置参数
2. 点击"💾 保存配置"应用更改

#### 📊 系统信息

显示详细的系统状态信息：
- 存储路径和统计
- 当前配置参数
- 模型加载状态

## 🎯 使用技巧

### 完整使用流程

1. **📤 上传文档**：
   - 拖拽或选择PDF文件到上传区域
   - 点击"上传并处理"等待处理完成
   - 查看右侧状态确认文档已成功处理

2. **💬 开始问答**：
   - 在问题输入框中输入您的问题
   - 选择合适的处理模式和搜索类型
   - 点击"提问"获取答案

3. **⚙️ 调整配置**（可选）：
   - 切换到"系统设置"标签页
   - 根据需要调整分解阈值等参数
   - 保存配置以应用更改

### 查询优化建议

1. **简单查询**（系统会自动识别，复杂度 < 6分）：
   - "这个文档的主要内容是什么？"
   - "文档中提到了哪些重要观点？"
   - "作者的结论是什么？"

2. **复杂查询**（系统会自动分解，复杂度 ≥ 6分）：
   - "比较文档中不同方法的优缺点"
   - "分析文档的研究方法、实验结果和结论"
   - "如何从这个研究中学习相关技术？"

### 搜索类型选择

- **文本+图像**（推荐）：适合大多数文档，全面检索
- **仅文本**：适合纯文本文档或文本相关查询
- **仅图像**：适合查询图表、图片等视觉内容

### 智能处理模式

- **启用智能处理**（推荐）：
  - ✅ 自动分析查询复杂度
  - ✅ 智能分解复杂查询
  - ✅ 多步骤检索执行
  - ✅ LLM智能结果汇总
  - ✅ 更完整、连贯的答案

- **禁用智能处理**：
  - ⚡ 处理速度更快
  - 📝 适合简单的事实性查询
  - 🔍 直接检索和生成答案

## 🛠️ 系统管理

### 存储管理

- **查看系统状态**：点击"📊 查看系统状态"
- **清空存储**：点击"🗑️ 清空存储"（谨慎操作）

### 状态信息

- 📁 存储路径
- 📊 文档和块的数量统计
- ⚙️ 当前配置信息

## 💡 示例问题

### 学术论文类文档

- "这篇论文的主要贡献是什么？"
- "论文使用了哪些研究方法？"
- "实验结果如何支持作者的假设？"
- "这项研究有哪些局限性？"
- "论文中的图表说明了什么？"

### 技术文档类

- "这个技术的核心原理是什么？"
- "如何实现这个功能？"
- "有哪些注意事项和最佳实践？"
- "与其他技术相比有什么优势？"

### 报告类文档

- "报告的主要发现是什么？"
- "数据趋势如何？"
- "有哪些建议和结论？"
- "不同指标之间的关系如何？"

## ⚠️ 注意事项

1. **文档格式**：目前仅支持PDF格式
2. **文件大小**：建议单个文件不超过100MB
3. **处理时间**：大文档处理可能需要几分钟
4. **API配置**：确保`dashscope_key.txt`文件存在且包含有效的API密钥
5. **网络连接**：需要稳定的网络连接访问LLM服务

## 🔧 故障排除

### 常见问题

1. **系统未初始化**：
   - 检查API密钥文件是否存在
   - 确认API密钥是否有效

2. **文档处理失败**：
   - 检查PDF文件是否损坏
   - 确认文件格式是否正确

3. **查询无结果**：
   - 确认已上传相关文档
   - 尝试调整查询表达方式

4. **界面无法访问**：
   - 检查端口7860是否被占用
   - 确认防火墙设置

### 日志查看

启动时的详细日志会显示在终端中，包括：
- 系统初始化状态
- 文档处理进度
- 查询执行信息
- 错误和警告信息

## 🎉 开始使用

现在您可以：

1. 📤 上传您的PDF文档
2. 🔍 分析您的查询
3. 💬 开始智能问答
4. 🚀 探索系统的强大功能！

---

**提示**：首次使用建议先上传一个小的PDF文件进行测试，熟悉界面操作后再处理大型文档。
